# ๐ ุงููุฑุญูุฉ 3 - 3D Viewer + Slider ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุงููุฑุญูุฉ ุงูุซุงูุซุฉ ุชุถูู:
1. **ุชุญููู ุชููุงุฆู ููุตูุฑ ุฅูู 3D** ุจุงุณุชุฎุฏุงู Meshy AI
2. **ุนุงุฑุถ 3D ุชูุงุนูู** ููููุชุฌุงุช
3. **ุฅุฏุงุฑุฉ Slider** ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
4. **ุชูุงูู ูุงูู** ูุน ููุญุฉ ุงูุชุญูู

---

## ๐ป ุงููููุงุช ุงููุถุงูุฉ

### **1. ูุงุนุฏุฉ ุงูุจูุงูุงุช**
```
database/update-phase3.sql
```
- ุฌุฏูู `homepage_slider` ูุฅุฏุงุฑุฉ ุงูุณูุงูุฏุฑ
- ุฅุถุงูุฉ ุญููู 3D ูู ุฌุฏูู `products`
- ุฅุนุฏุงุฏุงุช Meshy AI ูู `site_settings`

### **2. ุตูุญุงุช Admin**
```
admin/
โโโ settings/
โ   โโโ 3d-settings.php          โ ุฅุนุฏุงุฏุงุช Meshy AI
โ   โโโ slider.php                โ ุฅุฏุงุฑุฉ Slider
โโโ products/
    โโโ generate-3d.php           โ ุชูููุฏ ููุงุฐุฌ 3D
```

### **3. APIs**
```
api/
โโโ meshy-3d.php                  โ ุชูุงูู Meshy AI API
```

### **4. JavaScript**
```
assets/js/
โโโ model-viewer.js               โ ุนุงุฑุถ 3D
```

### **5. ุงูุตูุญุงุช ุงูุฑุฆูุณูุฉ**
```
index.php                         โ ุชุญุฏูุซ ูุน Slider
product.php                       โ ุชุญุฏูุซ ูุน ุนุงุฑุถ 3D
```

---

## ๐๏ธ ุงูุชุซุจูุช

### **1. ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช**
```bash
mysql -u username -p database_name < database/update-phase3.sql
```

### **2. ุฅูุดุงุก ุงููุฌูุฏุงุช ุงููุทููุจุฉ**
```bash
mkdir -p uploads/models
mkdir -p uploads/slider
chmod 755 -R uploads/
```

### **3. ุงูุญุตูู ุนูู Meshy AI API Key**

#### **ุฎุทูุงุช ุงูุญุตูู ุนูู API Key:**
1. ุงุฐูุจ ุฅูู: https://www.meshy.ai
2. ุฃูุดุฆ ุญุณุงุจ ูุฌุงูู (Google/Email)
3. ุงุฐูุจ ูู **Dashboard** โ **API Keys**
4. ุงุถุบุท **Create New Key**
5. ุงูุณุฎ ุงูู Key (ูุจุฏุฃ ุจู `msy_`)

#### **ุงูุญุฒูุฉ ุงููุฌุงููุฉ:**
- โ **200 ุชุญููู/ุดูุฑ** ูุฌุงูุงู
- โฑ๏ธ **2-5 ุฏูุงุฆู** ููู ุชุญููู
- ๐ฆ **GLB/OBJ/FBX** formats
- ๐จ **PBR Textures** ูุฏูุฌุฉ

### **4. ุถุจุท ุงูุฅุนุฏุงุฏุงุช**

#### **ูู ููุญุฉ ุงูุชุญูู:**
```
/admin/settings/3d-settings.php
```

1. ุงูุตู ุงูู **Meshy API Key**
2. ูุนูู **ุงูุชุญููู ุงูุชููุงุฆู** (ุงุฎุชูุงุฑู)
3. ุงุฎุชุฑ **ุงููุถุน**: ูุฏูู ุฃู ุชููุงุฆู
4. ุงุญูุธ ุงูุฅุนุฏุงุฏุงุช

---

## ๐๏ธ ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### **1. ุฌุฏูู homepage_slider**
```sql
CREATE TABLE homepage_slider (
    id INT PRIMARY KEY AUTO_INCREMENT,
    title_ar VARCHAR(255),           -- ุงูุนููุงู ุจุงูุนุฑุจู
    title_en VARCHAR(255),           -- ุงูุนููุงู ุจุงูุฅูุฌููุฒู
    subtitle_ar TEXT,                -- ุงูุนููุงู ุงููุฑุนู (ุนุฑุจู)
    subtitle_en TEXT,                -- ุงูุนููุงู ุงููุฑุนู (ุฅูุฌููุฒู)
    image_path VARCHAR(255),         -- ูุณุงุฑ ุงูุตูุฑุฉ
    button_text_ar VARCHAR(100),     -- ูุต ุงูุฒุฑ (ุนุฑุจู)
    button_text_en VARCHAR(100),     -- ูุต ุงูุฒุฑ (ุฅูุฌููุฒู)
    button_link VARCHAR(255),        -- ุฑุงุจุท ุงูุฒุฑ
    background_color VARCHAR(7),     -- ููู ุงูุฎูููุฉ (HEX)
    text_color VARCHAR(7),           -- ููู ุงููุต (HEX)
    is_active BOOLEAN,               -- ูุนุงู/ุบูุฑ ูุนุงู
    sort_order INT,                  -- ุชุฑุชูุจ ุงูุนุฑุถ
    created_at TIMESTAMP,
    updated_at TIMESTAMP
);
```

### **2. ุญููู 3D ูู products**
```sql
ALTER TABLE products ADD:
    model_3d_path VARCHAR(255),                  -- ูุณุงุฑ ููู GLB
    model_3d_status ENUM('none','processing','completed','failed'),
    model_3d_generated_at TIMESTAMP,             -- ุชุงุฑูุฎ ุงูุชูููุฏ
    enable_3d_view BOOLEAN                       -- ุชูุนูู ุนุงุฑุถ 3D
```

### **3. ุฅุนุฏุงุฏุงุช 3D ูู site_settings**
```sql
INSERT INTO site_settings:
    meshy_api_key          -- Meshy AI API Key
    enable_auto_3d         -- ุชูุนูู ุงูุชุญููู ุงูุชููุงุฆู
    3d_generation_mode     -- manual ุฃู auto
```

---

## ๐ก ููููุฉ ุนูู ุชุญููู ุงูุตูุฑ ูู 3D

### **1. ุงูุทุฑููุฉ ุงููุฏููุฉ**

#### **ูู ููุญุฉ ุงูุชุญูู:**
```
/admin/products/generate-3d.php
```

**ุงูุฎุทูุงุช:**
1. ุงุฎุชุฑ ุงูููุชุฌุงุช ุงูุชู ุชุฑูุฏ ุชุญููููุง
2. ุงุถุบุท **ุชูููุฏ ุงููุญุฏุฏ**
3. ุงูุชุธุฑ 2-5 ุฏูุงุฆู
4. ุณูุชู ุงูุชุญุฏูุซ ุชููุงุฆูุงู ุนูุฏ ุงูุงูุชูุงุก

### **2. ุงูุทุฑููุฉ ุงูุชููุงุฆูุฉ**

**ุนูุฏ ุชูุนูู Auto Mode:**
- ุนูุฏ ุฑูุน ุตูุฑุฉ ููุชุฌ ุฌุฏูุฏ
- ุฃู ุชุญุฏูุซ ุตูุฑุฉ ููุชุฌ ููุฌูุฏ
- ูุชู ุฅุฑุณุงููุง ุชููุงุฆูุงู ูู Meshy AI
- ูุชุธูุฑ ูู ุงููููุน ุจุนุฏ ุงููุนุงูุฌุฉ

### **3. ุณูุฑ ุงูุนูู (Workflow)**

```
โโโโโโโโโโโโโโโโโโโ
โ  ุฑูุน ุตูุฑุฉ ููุชุฌ  โ
โโโโโโโโโโฌโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโ
โ ุฅุฑุณุงู ูู Meshy  โ
โ   AI API        โ
โโโโโโโโโโฌโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโ
โ  ูุนุงูุฌุฉ (2-5ุฏ) โ
โ  Status: PROCESSING
โโโโโโโโโโฌโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโ
โ ุชุญููู GLB File  โ
โโโโโโโโโโฌโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโ
โ  ุญูุธ ูู ุงููุฌูุฏ  โ
โ  /uploads/models/
โโโโโโโโโโฌโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโ
โ ุชุญุฏูุซ ุงูููุชุฌ    โ
โ enable_3d_view=1โ
โโโโโโโโโโโโโโโโโโโ
```

---

## ๐จ ุฅุฏุงุฑุฉ Slider ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ

### **ุงููุตูู:**
```
/admin/settings/slider.php
```

### **ุงููููุฒุงุช:**

#### **1. ุฅุถุงูุฉ Slide ุฌุฏูุฏ**
- โ ุนููุงู ููุตู (ุนุฑุจู/ุฅูุฌููุฒู)
- โ ุตูุฑุฉ ุฎูููุฉ (1920x600px ูุซุงูู)
- โ ุฒุฑ ูุน ุฑุงุจุท ูุงุจู ููุชุฎุตูุต
- โ ุงุฎุชูุงุฑ ููู ุงูุฎูููุฉ ูุงููุต
- โ ุชุฑุชูุจ ุงูุนุฑุถ

#### **2. ุชุนุฏูู Slides**
- ุชุนุฏูู ุฃู ุนูุตุฑ ูู ุงูุนูุงุตุฑ
- ุชุบููุฑ ุงูุตูุฑุฉ
- ุชุญุฏูุซ ุงูุฃููุงู
- ุชูุนูู/ุชุนุทูู

#### **3. ุฅุนุงุฏุฉ ุงูุชุฑุชูุจ**
- **Drag & Drop** ูุฅุนุงุฏุฉ ุชุฑุชูุจ Slides
- ุงูุญูุธ ุงูุชููุงุฆู

#### **4. ุงูุญุฐู**
- ุญุฐู Slide ูุน ุตูุฑุชู

### **ูุซุงู Slide:**
```php
array(
    'title_ar' => 'ูุฑุญุจุงู ุจู ูู ูุชุฌุฑ 3D',
    'title_en' => 'Welcome to 3D Store',
    'subtitle_ar' => 'ุชุณูู ุฃูุถู ุงูููุชุฌุงุช ุจุชูููุฉ 3D',
    'subtitle_en' => 'Shop the best products with 3D',
    'image_path' => 'slide1.jpg',
    'button_text_ar' => 'ุชุณูู ุงูุขู',
    'button_link' => '/products.php',
    'background_color' => '#3b82f6',
    'text_color' => '#ffffff'
)
```

---

## ๐๏ธ ุนุงุฑุถ 3D (Model Viewer)

### **ุงูุชูููุฉ ุงููุณุชุฎุฏูุฉ:**
- **Google Model Viewer** Web Component
- ุฏุนู GLB/GLTF formats
- ุชูุงุนูู ุจุงููุงูู (Rotate, Zoom, Pan)
- ุฏุนู PBR materials
- Auto-rotate option

### **ุงูุงุณุชุฎุฏุงู ูู ุตูุญุฉ ุงูููุชุฌ:**

```html
<!-- ูู product.php -->
<div id="viewer-3d" 
     data-model-path="/uploads/models/model.glb">
</div>

<script src="/assets/js/model-viewer.js"></script>
<script>
new Product3DViewer('#viewer-3d', '/uploads/models/model.glb');
</script>
```

### **ุงููููุฒุงุช:**
- โ ุฒุฑ ุชุจุฏูู ุจูู 2D/3D
- โ ุฏูุฑุงู ุชููุงุฆู
- โ ุงูุชุญูู ุจุงููุงููุฑุง
- โ ุธูุงู ูุงูุนูุฉ
- โ ุชุญููู ุณุฑูุน
- โ Lazy loading
- โ Responsive

---

## ๐ง Meshy AI API

### **Endpoints ุงููุณุชุฎุฏูุฉ:**

#### **1. ุชูููุฏ 3D ูู ุตูุฑุฉ**
```
POST https://api.meshy.ai/v2/image-to-3d
```

**Request:**
```json
{
    "image_url": "https://yoursite.com/uploads/products/image.jpg",
    "enable_pbr": true,
    "topology": "quad",
    "target_polycount": 30000
}
```

**Response:**
```json
{
    "result": "task_id_here",
    "status": "PENDING"
}
```

#### **2. ุงูุชุญูู ูู ุญุงูุฉ ุงููููุฉ**
```
GET https://api.meshy.ai/v2/image-to-3d/{task_id}
```

**Response (Processing):**
```json
{
    "status": "PROCESSING",
    "progress": 45
}
```

**Response (Completed):**
```json
{
    "status": "SUCCEEDED",
    "model_urls": {
        "glb": "https://cdn.meshy.ai/model.glb",
        "fbx": "https://cdn.meshy.ai/model.fbx"
    }
}
```

### **ุงูุฃููุงุฏ ูู ุงููุดุฑูุน:**

#### **ุชูููุฏ 3D:**
```php
// api/meshy-3d.php
$ch = curl_init('https://api.meshy.ai/v2/image-to-3d');
curl_setopt_array($ch, [
    CURLOPT_HTTPHEADER => [
        'Authorization: Bearer ' . $api_key,
        'Content-Type: application/json'
    ],
    CURLOPT_POSTFIELDS => json_encode([
        'image_url' => $image_url,
        'enable_pbr' => true
    ])
]);
```

#### **ุงูุชุญูู ูู ุงูุญุงูุฉ:**
```javascript
// admin/products/generate-3d.php
setInterval(() => {
    fetch('/api/meshy-3d.php?action=check_status&product_id=' + id)
    .then(r => r.json())
    .then(data => {
        if (data.status === 'completed') {
            // ุชู ุจูุฌุงุญ!
        }
    });
}, 10000); // ูู 10 ุซูุงูู
```

---

## ๐ ุงูุฅุญุตุงุฆูุงุช ูุงููุฑุงูุจุฉ

### **ูู /admin/settings/3d-settings.php:**

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   ุฅุฌูุงูู ุงูููุชุฌุงุช: 150      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ   ูุฏููุง 3D: 85  โ           โ
โ   ููุฏ ุงููุนุงูุฌุฉ: 12  โณ       โ
โ   ุจุฏูู 3D: 53  โ๏ธ           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### **ุงูููุงุชุฑ ุงููุชุงุญุฉ:**
- `?filter=all` - ุฌููุน ุงูููุชุฌุงุช
- `?filter=no_3d` - ุจุฏูู 3D
- `?filter=processing` - ููุฏ ุงููุนุงูุฌุฉ
- `?filter=completed` - ููุชูู

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### **1. ุฎุทุฃ ูู API Key**
```
ุฎุทุฃ: "Unauthorized"
ุงูุญู: ุชุฃูุฏ ูู ุตุญุฉ API Key ูู ุงูุฅุนุฏุงุฏุงุช
```

### **2. ูุดู ุงูุชุญููู**
```
ุญุงูุฉ: FAILED
ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:
- ุตูุฑุฉ ุบูุฑ ูุงุถุญุฉ
- ุตูุฑุฉ ุตุบูุฑุฉ ุฌุฏุงู (< 512px)
- ุฎูููุฉ ูุนูุฏุฉ

ุงูุญู: ุงุณุชุฎุฏู ุตูุฑ ุนุงููุฉ ุงูุฌูุฏุฉ ุจุฎูููุฉ ุจุณูุทุฉ
```

### **3. ุจุทุก ุงูุชุญููู**
```
ุงูููุช ุงูุทุจูุนู: 2-5 ุฏูุงุฆู
ุฅุฐุง ุชุฌุงูุฒ 10 ุฏูุงุฆู:
- ุชุญูู ูู ุญุงูุฉ Meshy AI
- ุฃุนุฏ ุงููุญุงููุฉ ูุงุญูุงู
```

### **4. ููู GLB ูุง ูุธูุฑ**
```
ุชุญูู ูู:
1. ุตูุงุญูุงุช ูุฌูุฏ /uploads/models/
2. ุญูู enable_3d_view = 1 ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. ูุฌูุฏ ููู GLB ูุนููุงู ูู ุงููุฌูุฏ
```

---

## ๐ ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### **1. ุนุฑุถ ููุชุฌ ูุน 3D:**
```php
<?php if ($product['enable_3d_view']): ?>
<button onclick="show3D()">
    <i class="bi bi-box"></i> ุนุฑุถ 3D
</button>

<div id="3d-viewer" 
     data-model-path="<?php echo UPLOAD_URL . '/models/' . $product['model_3d_path']; ?>">
</div>
<?php endif; ?>
```

### **2. ุชูููุฏ 3D ูู JavaScript:**
```javascript
function generateSingle(productId) {
    fetch('/api/meshy-3d.php?action=generate', {
        method: 'POST',
        body: `product_id=${productId}`
    })
    .then(r => r.json())
    .then(data => {
        if (data.success) {
            checkStatus(productId);
        }
    });
}
```

### **3. ุฅุถุงูุฉ Slide ุฌุฏูุฏ:**
```php
$db->execute(
    "INSERT INTO homepage_slider (title_ar, image_path, is_active) VALUES (?, ?, 1)",
    ['ุนุฑูุถ ุญุตุฑูุฉ', 'slide.jpg']
);
```

---

## ๐ ุฃูุถู ุงูููุงุฑุณุงุช

### **ููุตูุฑ:**
1. โ ุงุณุชุฎุฏู ุตูุฑ ุนุงููุฉ ุงูุฏูุฉ (1024x1024 ุฃู ุฃุนูู)
2. โ ุฎูููุฉ ุจุณูุทุฉ ุฃู ุดูุงูุฉ
3. โ ุฅุถุงุกุฉ ุฌูุฏุฉ ููุงุถุญุฉ
4. โ ุฒูุงูุง ูุชุนุฏุฏุฉ ููููุชุฌ

### **ูู Slider:**
1. โ ุตูุฑ ุจููุงุณ 1920x600px
2. โ ูุตูุต ูุตูุฑุฉ ููุงุถุญุฉ
3. โ ุฃููุงู ูุชูุงุณูุฉ
4. โ ูุง ุชุฒูุฏ ุนู 5 slides

### **ูู 3D:**
1. โ ุงุฎุชุจุฑ ุงููููุฐุฌ ูุจู ุงููุดุฑ
2. โ ุญุฌู ููู GLB ุฃูู ูู 10MB
3. โ ุงุณุชุฎุฏู Auto-rotate ููุนุฑุถ ุงูุฃูุถู

---

## ๐ ุฑูุงุจุท ูููุฉ

### **ููุญุฉ ุงูุชุญูู:**
- ุฅุนุฏุงุฏุงุช 3D: `/admin/settings/3d-settings.php`
- ุชูููุฏ 3D: `/admin/products/generate-3d.php`
- ุฅุฏุงุฑุฉ Slider: `/admin/settings/slider.php`

### **APIs:**
- Meshy Integration: `/api/meshy-3d.php`

### **Frontend:**
- ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ: `/index.php`
- ุตูุญุฉ ุงูููุชุฌ: `/product.php?id=X`

### **ููุงูุน ุฎุงุฑุฌูุฉ:**
- Meshy AI: https://www.meshy.ai
- Model Viewer Docs: https://modelviewer.dev
- ุชูุซูู Meshy: https://docs.meshy.ai

---

## ๐ ุงูุฎูุงุตุฉ

ุงููุฑุญูุฉ 3 ุฃุถุงูุช:
- โ ุชุญููู ุชููุงุฆู ููุตูุฑ ูู 3D
- โ ุนุงุฑุถ 3D ุชูุงุนูู
- โ ุฅุฏุงุฑุฉ Slider ุฏููุงููููุฉ
- โ ุชูุงูู Meshy AI ุงููุงูู
- โ ูุงุฌูุฉ ุณููุฉ ููุฅุฏุงุฑุฉ

**ูู ุดูุก ุฌุงูุฒ ููุงุณุชุฎุฏุงู!** ๐

---

## ๐ ุงูุฏุนู

ูููุณุงุนุฏุฉ ุฃู ุงูุงุณุชูุณุงุฑุงุช:
- ุฑุงุฌุน ุงูุชูุซูู ุฃุนูุงู
- ุชุญูู ูู `/logs/3d-generation.log`
- ุชูุงุตู ูุน Meshy AI Support

**Happy 3D Shopping! ๐๏ธ๐**